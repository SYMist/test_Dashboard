# 대시보드 요구사항 정리 (차트별 유저 플로우)

## 일자 별 문의 수 차트
- 관리자는 기준 기간 별 문의 수를 조회할 수 있다.
- 관리자는 기준 기간으로 '일', '주', '월', '분기', '반기', '연'을 선택할 수 있다.
- 관리자는 선택된 기준 기간에 대해 직전 기간 대비 현재 문의 수 증감을 확인할 수 있다.
- 관리자는 마우스 호버로 특정 버킷의 날짜와 문의 수를 툴팁으로 확인할 수 있다.
- 관리자는 인사이트 보기 토글 상태(전체/인사이트 데이터)에 따라 동일 차트를 조회할 수 있다.
- 전역 기간/검색 필터가 연결된 경우, 해당 필터가 차트에 반영되어 재집계된다.

## 최근 문의 표 (트렌드 하단)
- 관리자는 최신 문의 목록을 표로 조회할 수 있다.
- 관리자는 검색창으로 상품명/상품 코드/문의 내용으로 필터링할 수 있다.
- 관리자는 정렬 옵션(최신순/오래된순)으로 정렬할 수 있다.
- 관리자는 페이지네이션을 통해 목록을 넘겨볼 수 있다(10행/페이지).
- 관리자는 '요청 ID'를 클릭하면 해당 문의의 젠데스크 문의 상세 페이지로 이동할 수 있다.
- 관리자는 '예약코드'를 클릭하면 해당 예약의 어드민 예약 상세 페이지로 이동할 수 있다.

## 대카테고리별 세부 카테고리 파이차트 (여행/쇼핑/어학당)
- 관리자는 대카테고리(여행/쇼핑/어학당)별 세부 카테고리 분포를 파이차트로 확인할 수 있다.
- 관리자는 파이의 특정 세부 카테고리(조각 또는 범례)를 클릭해 하단 상품 차트에 교차 필터를 적용할 수 있다.
- 관리자는 상단 배지(대카테고리/세부 카테고리)를 통해 현재 활성화된 필터를 확인하고, X 버튼으로 해제할 수 있다.
- 관리자는 인사이트 보기 토글 상태(전체/인사이트 데이터)에 따라 동일 파이 분포를 조회할 수 있다.

## 상품 기반 분석 차트 (막대: 상품명 Y축, 건수 X축)
- 관리자는 차원 전환 탭으로 '문의 유형' 또는 '언어' 기준의 스택 막대를 선택할 수 있다.
- 관리자는 '문의 유형' 모드에서 언어 필터 탭(영어/일본어/대만어/홍콩어)으로 해당 언어만 보이게 할 수 있다.
- 관리자는 '언어' 모드에서 문의 유형 필터 탭으로 해당 유형만 보이게 할 수 있다.
- 관리자는 정렬 옵션(문의 많은 순/적은 순)으로 상품 순서를 조정할 수 있다.
- 관리자는 '주문량 보기' 토글로 주문 보조막대를 표시할 수 있다.
  - 언어 모드: 언어 분포 비율로 분해된 주문 스택을 확인할 수 있다.
  - 문의 유형 모드: 회색 단일 주문 보조막대를 확인할 수 있다.
- 관리자는 상품명 라벨을 클릭해 상품 툴팁(오버레이)을 열 수 있다.
  - 관리자는 툴팁 내에서 단위 탭(일/주/월/분기/반기/연) 전환과 문의/주문 시계열(그룹형 막대)을 확인할 수 있다.
  - 관리자는 툴팁 외부 클릭으로 툴팁을 닫을 수 있다.
- 관리자는 막대의 스택 세그먼트를 클릭해 세부 분포(파이)와 샘플 텍스트 리스트를 확인할 수 있다.
- 관리자는 파이차트 클릭으로 설정된 대/세부 카테고리 교차 필터와 내부 언어/유형 필터를 조합하여 결과를 좁힐 수 있다.
- 관리자는 인사이트 보기 토글 상태(전체/인사이트 데이터)에 따라 동일 차트를 조회할 수 있다.



## 상품 별 주문 대비 문의 비율 카드
- 관리자는 상품별 (문의 수/주문 수) 비율을 확인할 수 있다.
- 관리자는 정렬 옵션(문의 많은 순/적은 순 및 필요 시 비율 기준)에 따라 카드를 정렬할 수 있다.
- 관리자는 인사이트 보기 토글 상태(전체/인사이트 데이터)에 따라 동일 카드를 조회할 수 있다.

## 언어별 문의 유형 분포 카드
- 관리자는 언어별 카드에서 해당 언어 내 문의 유형 Top N과 비율(%)을 확인할 수 있다.
- 관리자는 정렬 옵션(문의 많은 순/적은 순 또는 비율 기준)에 따라 항목 순서를 조정할 수 있다.
- 관리자는 인사이트 보기 토글 상태(전체/인사이트 데이터)에 따라 동일 카드를 조회할 수 있다.

## 전역 요소
- 인사이트 보기 토글
  - 관리자는 인사이트 보기 토글을 통해 전체 데이터/인사이트 데이터로 모든 차트와 카드를 전환할 수 있다.
  - 토글 상태는 로컬 스토리지에 저장되어 재방문 시에도 유지된다.
- 전역 필터(상단 툴바)
  - 관리자는 기간(시작/종료)을 입력해 전역 기간 필터를 적용할 수 있다.
  - 관리자는 '상품명 또는 코드'로 전역 검색을 적용할 수 있다.
  - 전역 필터가 연결된 경우, 모든 차트/카드/테이블에 공통으로 반영된다.

## 접근성(A11y) 요구
- 키보드 내비게이션
  - 모든 인터랙티브 요소(탭, 토글, 버튼, 범례, 파이/막대 세그먼트, 배지 X 등)는 키보드 포커스로 접근 가능해야 한다(Tab/Shift+Tab).
  - Space/Enter로 토글/클릭 동작이 수행되어야 한다.
- 포커스 표시 및 순서
  - 포커스 링은 명확히 보이고, 시각적 순서와 논리적 포커스 순서가 일치해야 한다.
- 명도 대비
  - 텍스트/아이콘 대비 WCAG AA 이상(일반 텍스트 4.5:1, 대텍스트 3:1)을 만족한다.
- 스크린리더 지원
  - 차트 컨테이너는 `role="img"` 또는 적절한 Landmark를 갖고, `aria-label`/`aria-describedby`로 목적/요약을 제공한다.
  - SVG 파이/막대는 보조 텍스트(`<title>`, `<desc>`) 또는 ARIA 속성으로 레이블을 제공한다(예: "여행 · 입장권/티켓 · 216건").
  - 실시간 업데이트(필터 변경, 토글) 시 핵심 변화는 비침습적 라이브 영역(aria-live="polite")로 총 건수 텍스트를 공지한다.
- 도구팁/호버
  - 마우스 호버 정보는 키보드 포커스 및 터치 환경에서도 접근 가능해야 한다(포커스 진입 시 동일 정보 표시, ESC로 닫기).
  - 도구팁은 포커스 트랩을 만들지 않으며 외부 포커스 이동/클릭 시 닫힌다.
- 터치 타겟
  - 터치 가능한 요소의 최소 크기는 40×40px 이상을 권장한다(파이 세그먼트/범례는 주변 여백 포함).
- 표/페이징
  - 데이터 테이블은 시맨틱 마크업(`<table>`, `<thead>`, `<tbody>`, `<th scope="col">`)을 사용한다.
  - 페이지네이션 컨트롤은 버튼 역할과 현재 페이지(`aria-current="page"`)를 제공한다.

## 반응형(Responsive) 요구
- 브레이크포인트
  - 기본: ≥1200px(데스크톱, 현재 1000px 컨테이너 기준)
  - 태블릿: 768–1199px(카드 1열/2열 재배치, 범례/탭 줄바꿈)
  - 모바일: ≤767px(단일 열, 스크롤 우선, 폰트/여백 축소)
- 레이아웃/컴포넌트
  - 컨테이너는 최대 폭을 유지하되 패딩은 뷰포트에 맞춰 축소된다.
  - 차트는 부모 폭에 맞춰 뷰박스/캔버스를 리사이즈한다(가로 스크롤 대신 재계산 우선).
  - 범례/필터 탭은 자동 줄바꿈되며, 오버플로 시 수평 스크롤을 제공할 수 있다.
  - 막대 차트 Y축 라벨은 길이 초과 시 말줄임(...) 처리하고, 전체값은 title/툴팁로 제공한다.
  - 파이차트 3개는 데스크톱 가로 배치, 태블릿 2열, 모바일 1열 스택으로 재배치한다.
- 상호작용
  - 터치 환경에서 도구팁은 탭으로 열리고 외부 탭/백드롭 탭으로 닫힌다.
  - 작은 화면에서 탭/버튼 터치 영역을 확대하고 간격을 넓힌다.
- 성능
  - 리사이즈/스크롤에 따른 재렌더는 디바운스(예: 100–200ms) 처리한다.
  - 초기 로드/재계산 시 60fps를 목표로 하고, DOM 노드/패스 수를 제어한다.
